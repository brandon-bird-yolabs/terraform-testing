name: "Terraform"

on:
  push:
    branches:
      - master
  pull_request:
  pull_request_review_comment:
  label:
    types: [created, deleted]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: comment PR
        uses: unsplash/comment-on-pr@master
        if: contains( toJson(github), 'apply' )
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          msg: "label `apply` detected"
          check_for_duplicate_msg: false  # OPTIONAL
